# üöÄ Telegram WebApp - –†–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω–∞—è –í–∏—Ç—Ä–∏–Ω–∞ –ß–∞—Ç-–±–æ—Ç–æ–≤

## üìã –°—Ç–∞—Ç—É—Å –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è ‚úÖ

**–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç!**

### üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ URL:
- **–û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: https://app.daniillepekhin.ru
- **n8n (–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è)**: https://n8npersonal.daniillepekhin.ru
- **pgAdmin (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)**: https://app.daniillepekhin.ru/pgadmin
- **Metabase (–∞–Ω–∞–ª–∏—Ç–∏–∫–∞)**: https://app.daniillepekhin.ru/metabase
- **Grafana (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)**: https://app.daniillepekhin.ru/grafana

### ü§ñ Telegram Bot:
- **Bot Token**: `5466303727:AAGauSz23_We8iTGjRhbaL5LJobgs3e9V0E`
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
- **–ö–æ–º–∞–Ω–¥—ã**: `/start`, `/stats`, `/track`, `/help`
- **–†–µ–∂–∏–º**: –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π WebApp —Å –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–µ–π API

## üß™ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ WebApp
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://app.daniillepekhin.ru
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã:
   - üì± Showcase (–≤–∏—Ç—Ä–∏–Ω–∞ –∫–µ–π—Å–æ–≤)
   - üí¨ Demo Chat (–¥–µ–º–æ —á–∞—Ç)
   - üîó Referral System (—Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞)
   - üë§ User Profile (–ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
   - üìä Analytics & Feedback (–∞–Ω–∞–ª–∏—Ç–∏–∫–∞)
   - üìà Channel Analytics (–∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∫–∞–Ω–∞–ª–æ–≤)
   - üìù Post Analytics (–∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ—Å—Ç–æ–≤)
   - üîç Post Tracking (–æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ—Å—Ç–æ–≤)
   - ‚öôÔ∏è Telegram Integration (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram)

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Telegram Bot
1. –ù–∞–π–¥–∏—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–Ω–æ–ø–∫–∏:
   - "üöÄ –û—Ç–∫—Ä—ã—Ç—å —Ä–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω—ã–π WebApp"
   - "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"
   - "üîó –°–æ–∑–¥–∞—Ç—å —Å—Å—ã–ª–∫—É –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è"
   - "üéØ –î–µ–º–æ –∫–µ–π—Å—ã"
   - "üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞"
4. –ù–∞–∂–º–∏—Ç–µ "üöÄ –û—Ç–∫—Ä—ã—Ç—å —Ä–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω—ã–π WebApp" –¥–ª—è –ø–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ n8n
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://n8npersonal.daniillepekhin.ru
2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É
3. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Å—Ç–æ–π workflow –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–∞–∑—ã –î–∞–Ω–Ω—ã—Ö
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://app.daniillepekhin.ru/pgadmin
2. –í–æ–π–¥–∏—Ç–µ —Å —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
   - Email: daniillepekhin@yandex.ru
   - Password: U3SfZ2cru
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É PostgreSQL

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ê–Ω–∞–ª–∏—Ç–∏–∫–∏
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://app.daniillepekhin.ru/metabase
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
3. –°–æ–∑–¥–∞–π—Ç–µ –¥–∞—à–±–æ—Ä–¥—ã –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –°–µ—Ä–≤–∏—Å–∞–º–∏

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@217.114.13.102

# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /opt/telegram-webapp

# –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f [service_name]

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
docker-compose restart [service_name]

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose down

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up -d
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Telegram Bot:

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç:
```bash
# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
./run-bot.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
ps aux | grep telegram-bot-handler
```

#### –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ screen:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –±–æ—Ç–∞
ps aux | grep telegram-bot-handler

# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Å—Å–∏–∏ –±–æ—Ç–∞
screen -r telegram-bot

# –°–ø–∏—Å–æ–∫ screen —Å–µ—Å—Å–∏–π
screen -list

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
pkill -f telegram-bot-handler
screen -dmS telegram-bot bash -c 'export TELEGRAM_BOT_TOKEN=5466303727:AAGauSz23_We8iTGjRhbaL5LJobgs3e9V0E && node telegram-bot-handler.js'
```

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ systemd (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫):
```bash
# –í–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
systemctl enable telegram-bot.service

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å
systemctl start telegram-bot.service

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
systemctl status telegram-bot.service

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–µ—Ä–≤–∏—Å
systemctl stop telegram-bot.service

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
journalctl -u telegram-bot.service -f
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã:
- **CPU**: –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—Å—è —á–µ—Ä–µ–∑ Grafana
- **–ü–∞–º—è—Ç—å**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **–î–∏—Å–∫**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã PostgreSQL
- **–°–µ—Ç—å**: Traefik —Å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏

### –õ–æ–≥–∏:
- **Traefik**: `docker-compose logs traefik`
- **Backend**: `docker-compose logs backend`
- **Frontend**: `docker-compose logs frontend`
- **PostgreSQL**: `docker-compose logs postgres`
- **n8n**: `docker-compose logs n8n`
- **Telegram Bot**: `journalctl -u telegram-bot.service -f`

## üéØ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –†–µ–≤–æ–ª—é—Ü–∏–æ–Ω–Ω–æ–≥–æ WebApp

### –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º:
- ‚úÖ `tg.expand()` - —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–∞ –ø–æ–ª–Ω—ã–π —ç–∫—Ä–∞–Ω
- ‚úÖ `tg.setHeaderColor()` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–≤–µ—Ç–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞
- ‚úÖ `tg.setBackgroundColor()` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–≤–µ—Ç–∞ —Ñ–æ–Ω–∞
- ‚úÖ `tg.enableClosingConfirmation()` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≤—ã—Å–æ—Ç–∞ viewport
- ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π Telegram Web Apps API

### –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- üì± Haptic feedback
- üé® –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
- üìã –†–∞–±–æ—Ç–∞ —Å –±—É—Ñ–µ—Ä–æ–º –æ–±–º–µ–Ω–∞
- üì± QR –∫–æ–¥ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- üí≥ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–∞–º–∏
- ‚òÅÔ∏è Cloud Storage
- üîê –ë–∏–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞
–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –¥–æ–º–µ–Ω–æ–≤
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Docker Compose

---

**üéâ –ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** 